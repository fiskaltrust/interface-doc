## Reference Tables

### Type of Receipt: ftReceiptCase

The ftReceiptCase defines the type of receipt and hence how fiskaltrust.SecurityMechanisms should process receipts according to the French law.

For France (FR) the country code is `0x4652`. Thus, the value for an unknown ftReceiptCase in France is `0x4652000000000000`.

| **Value**            | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                 | **Middleware-Version** |
|----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| `0x4652000000000000` | Unknown receipt for FR<br />Processed like a ticket                                                                                                                                                                                                                                                                                                                                                                             | 1.2                 |
| `0x4652000000000001` | Ticket<br />Legal document; has to be signed.<br />Sign: Yes<br />Chain and national numbering: T<br />Details: GT counters are raised                                                                                                                                                                                                                                                                                          | 1.2                 |
| `0x4652000000000002` | Payment Prove<br />Payment without knowledge what was paid.<br />Legal document; has to be signed.<br />Sign: Yes<br />Chain and national numbering: P<br />No ChargeItems on payment-prove, the total amount is always zero, a negative payitem of type `0x4652000000000011` is used to get the sum of payitems to zero.<br />Details: GT counters are not raised                                                              |                     |
| `0x4652000000000003` | Invoice<br />Legal document; has to be signed.<br />Sign: Yes<br />Chain and national numbering: I<br />A reference to the ticket can be created by using the cbPreviousReceiptNumber in the request.<br />Detail: GT counters are raised                                                                                                                                                                                       |                     |
| `0x4652000000000004` | Shift Receipt / Grand Total Ticket / Grand Total Invoice: Shift<br />Sign: Yes<br />Chain and national numbering: G<br />Details: Resets shift counter, keeps all other counters                                                                                                                                                                                                                                                | 1.2                 |
| `0x4652000000000005` | Daily Receipt / Grand Total Ticket / Grand Total Invoice: Daily<br />Sign: Yes<br />Chain and national numbering: G<br />Details:<br />-   Adds daily counter to month-counter an then resets daily counter<br />-   keeps shift counter                                                                                                                                                                                        | 1.2                 |
| `0x4652000000000006` | Monthly Receipt / Grand Total Ticket / Grand Total Invoice: Month<br />Sign: Yes<br />Chain and national numbering: G<br />Details:<br />-   Adds daily counter to month-counter an then resets daily counter<br />-   Adds monthly counter to yearly counter and then resets monthly counter<br />-   keeps shift counter                                                                                                      | 1.2                 |
| `0x4652000000000007` | Yearly Receipt / Grand Total Ticket / Grand Total Invoice: Year<br />Sign: Yes<br />Chain and national numbering: G<br />Details:<br />-   Adds daily counter to month-counter an then resets daily counter<br />-   Adds monthly counter to yearly counter and then resets monthly counter<br />-   Resets yearly counter<br />-   keeps shift counter                                                                         | 1.2                 |
| `0x4652000000000008` | Bill<br />List of ChargeItems to be payed. Used to inform customers about their open ChargeItems. payitemtype `0x4652000000000011` is used<br />Sign: Yes<br />Chain and national numbering: B<br />Details: GT counters are not raised. When the bill is used, the phrase "document provisoire" is returned with the fiskaltrust signature and must be printed on the bill. Every time the bill is reprinted, an upcounting number denoting how may times the bill has been printed is returned and must be printed on the bill and is then recorded in the journal. If bill and payment prove are created, this does not replace a ticket creation. A ticket or an invoice has to be issued to raise turnover and raise the GT counters as well |                     |
| `0x4652000000000009` | Delivery Note<br />Sign: no<br />Chain and national numbering: no                                                                                                                                                                                                                                                                                                                                                               |                     |
| `0x465200000000000A` | Cash Deposit<br />Same handling as payment prove<br />Chain and national numbering: P                                                                                                                                                                                                                                                                                                                                           |                     |
| `0x465200000000000B` | Pay out<br />Same handling as payment prove<br />Chain and national numbering: P                                                                                                                                                                                                                                                                                                                                                |                     |
| `0x465200000000000C` | Payment transfer<br />Switch between Payment method, e.g. from cash to credit card<br />Sign: Yes<br />Chain and national numbering: P                                                                                                                                                                                                                                                                                          |                     |
| `0x465200000000000D` | Internal / Material<br />Sign: No<br />Chain and national numbering: no                                                                                                                                                                                                                                                                                                                                                         |                     |
| `0x465200000000000E` | Foreign sales<br />Same handling as bill<br />Sign: Yes<br />Chain und national numbering: B                                                                                                                                                                                                                                                                                                                                    |                     |
| `0x465200000000000F` | Zero-Receipt<br />Sign: Yes<br />Chain and national numbering: G<br />Details: A receipt with empty charge items block (ftChargeItem) and empty payment block (ftPayItem) which amounts to a total of "0".                                                                                                                                                                                                                      |                     |
| `0x4652000000000010` | Start-Receipt<br />Sign: Yes<br />Chain and national numbering: G                                                                                                                                                                                                                                                                                                                                                               |                     |
| `0x4652000000000011` | Stop-Receipt<br />Sign: Yes<br />Chain and national numbering: G                                                                                                                                                                                                                                                                                                                                                                |                     |
| `0x4652000000000012` | Protocol / Technical Event Log<br />Has to be signed<br />Sign: Yes<br />Chain and national numbering: L<br />Details: Can be used by the POS system to log custom data.                                                                                                                                                                                                                                              |  1.2                |
| `0x4652000000000013` | Protocol / Accounting / Audit<br />Has to be signed<br />Sign: Yes<br />Chain and national numbering: L<br />Details: Can be used by the POS system to log custom data.                                                                                                                                                                                                                                               | 1.2                 |
| `0x4652000000000014` | Protocol / Custom<br />Does not need to be signed<br />Sign: No<br />Chain and national numbering: No<br />Details: Can be used by the POS system to log custom data.                                                                                                                                                                                                                                                    |  1.2                |
| `0x4652000000000015` | Archive<br />Has to be Signed<br />Sign: Yes<br />Chain and national numbering: A<br />Details: Will trigger automatically a daily closing.<br />To get a complete archive of the receiptjournal and the queueitems a `/journal`request has to be send to the type `0x0000000000000010`. The value of `ftQueueRow` in the response of this receiptcase has to be send in the `from`-parameter. As response a zip-file is returned as stream. This can be saved and used for hash and chain checking on the local POS or the ExportTool for France can be used for checking the inalterabilty of the archive.                                                                                                                                                                                                                                                                                     |  1.2                |
| `0x4652000000000016` | Copy<br />Has to be Signed<br />Sign: Yes<br />Chain and national numbering: C<br />Details: in a request the cbPreviousReceiptReference is mandatory. It contains the receiptnumber of the cash register which was handed out as a copy. When a copy of a reciept is requested, the phrase "duplicata" is returned with the fiskaltrust signature and must be printed on the receipt. Every time the receipt is reprinted, an upcounting number denoting how may times the receipt has been printed is returned and must be printed on the receipt and is then recorded in the journal.                                                                                                                                                                                      | 1.2                 |
<span id="_Toc527986685" class="anchor"></span>*Table 33. Type of Receipt: ftReceiptCase (FR – BOI-TVA-DECL 30-10-30)*

#### ftReceiptCaseFlag

Diverse business transactions according to the French law and regulations can result in certain combinations of types of receipts. For this, bytes 6, 5, 4 and 3 are used as combinable codes. These codes can be added with the help of the logic operator "OR".

| **Value**            | **Description**                                                                                                                                                                                                                                                                                                                                                                                    | **Version** |
|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| `0x0000000000010000` | "out of service"<br />The transferred receipt contains data which has been created during an outage of the connection between the POS System and the fiskaltrust.Middleware. The original receipts are avaiable in handwritten or digital format and are now transferred and subsequently consolidated and signed via zero receipt. This can be necessary for example after a power or server outage. | 1.2         |
| `0x0000000000020000` | "training receipt"<br />All requests issued with this flag are chained and signed in a separate chain. The phrase "mode école" is printed on any artifact that is printed while the flag is being used. For national numbering "X" is used.<br />GT counters are not raised.                                                                                                                                                                                                                        | 1.2         |
| `0x0000000000040000` | "reverse receipt" or "voided receipt"<br />Common behaviour                                                                                                                                                                                                                                                                                                                                        |             |
| `0x0000800000000000` | "receipt request"<br />Common behaviour                                                                                                                                                                                                                                                                                                                                                            |             |

<span id="_Toc527986686" class="anchor"></span>*Table 34. Type of Receipt: ftReceiptCase Flags (FR – BOI-TVA-DECL 30-10-30)*

### Type of Service: ftChargeItemCase

The ftChargeItemCase defines the type of service in charge item blocks and thus how fiskaltrust.SecurityMechanism processes individual receipts with regards to receipt generation and the accordance to the French law.

For France (FR) the country code is 0x4652. Thus, the value for an unknown ftChargeItemCase in France is 0x4652000000000000.

| **Value**            | **Description**                                                                                                                                                                                                                                                                                                                                      | **Middleware Version** |
|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| `0x4652000000000000` | "unknown type of service for FR"<br />With help of the VAT-rates table saved within fiskaltrust.SecurityMechanisms, an allocation to standard /reduced-1 /reduced-2 / super-reduced/zero is attempted.                                                                                                                                               | 1.2                 |
| `0x4652000000000001` | "undefined type of service for FR reduced-1"<br />(as of 1.1.2017, this is calculated with 5,5%).                                                                                                                                                                                                                                                    | 1.2                 |
| `0x4652000000000002` | "undefined type of service for FR reduced-2"<br />(as of 1.1.2016, this is calculated with 10%<br />Loi n° 2015-1786 du 29 décembre 2015, art. 79).                                                                                                                                                                                                  | 1.2                 |
| `0x4652000000000003` | "undefined type of service for FR normal"<br />(as of 1.1.2014, this is 20%,<br />Loi n° 2012-1510 du 29 décembre 2012, art. 68-III-B).                                                                                                                                                                                                              | 1.2                 |
| `0x4652000000000004` | "undefined type of service for FR special" (super-reduced)<br />Includes all rates hat are not contained in the previous ones (as of 1.1.2017, this can be for example 2,1%).                                                                                                                                                                        | 1.2                 |
| `0x4652000000000005` | "undefined type of service for FR zero"<br />Includes data which are indicated with 0% sales tax and also data where the sales tax is unknown, for example in a reference to an outgoing invoice. Also in cases where the sales tax should not be apparent, for example in the case of differential taxation, the data can be issued with this code. | 1.2                 |
| `0x4652000000000006` | "reverse charge"<br />Reversal of tax liability.                                                                                                                                                                                                                                                                                                     | 1.2                 |
| `0x4652000000000007` | "not own sales"<br />In the data, a VAT-rate can be indicated.                                                                                                                                                                                                                                                                                       | 1.2                 |
| `0x4652000000000008` | "delivery reduced-1"<br />For processing, see (`0x4652000000000001`)                                                                                                                                                                                                                                                                                 | 1.2                 |
| `0x4652000000000009` | "delivery reduced-2"<br />For processing, see (`0x4652000000000002`)                                                                                                                                                                                                                                                                                 | 1.2                 |
| `0x465200000000000A` | "delivery normal"<br />For processing, see (`0x4652000000000003`)                                                                                                                                                                                                                                                                                    | 1.2                 |
| `0x465200000000000B` | "delivery special"<br />For processing, see (`0x4652000000000004`)                                                                                                                                                                                                                                                                                   | 1.2                 |
| `0x465200000000000C` | "delivery zero"<br />For processing, see (`0x4652000000000005`)                                                                                                                                                                                                                                                                                      | 1.2                 |
| `0x465200000000000D` | "other services reduced-1"<br />For processing, see (`0x4652000000000001`)                                                                                                                                                                                                                                                                           | 1.2                 |
| `0x465200000000000E` | "other services reduced-2"<br />For processing, see (`0x4652000000000002`)                                                                                                                                                                                                                                                                           | 1.2                 |
| `0x465200000000000F` | "other services normal"<br />For processing, see (`0x4652000000000003`)                                                                                                                                                                                                                                                                              | 1.2                 |
| `0x4652000000000010` | "other services special"<br />For processing, see (`0x4652000000000004`)                                                                                                                                                                                                                                                                             | 1.2                 |
| `0x4652000000000011` | "other services zero"<br />For processing, see (`0x4652000000000005`)                                                                                                                                                                                                                                                                                | 1.2                 |
| `0x4652000000000012` | "catalogue services reduced-1"<br />For processing, see (`0x4652000000000001`)                                                                                                                                                                                                                                                                       | 1.2                 |
| `0x4652000000000013` | "catalogue services reduced-2"<br />For processing, see (`0x4652000000000002`)                                                                                                                                                                                                                                                                       | 1.2                 |
| `0x4652000000000014` | "catalogue services normal"<br />For processing, see (`0x4652000000000003`)                                                                                                                                                                                                                                                                          | 1.2                 |
| `0x4652000000000015` | "catalogue services special"<br />For processing, see (`0x4652000000000004`)                                                                                                                                                                                                                                                                         | 1.2                 |
| `0x4652000000000016` | "catalogue services zero"<br />For processing, see (`0x4652000000000005`)                                                                                                                                                                                                                                                                            | 1.2                 |
| `0x4652000000000017` | "own consumption reduced-1"<br />For processing, see (`0x4652000000000001`)                                                                                                                                                                                                                                                                          | 1.2                 |
| `0x4652000000000018` | "own consumption reduced-2"<br />For processing, see (`0x4652000000000002`)                                                                                                                                                                                                                                                                          | 1.2                 |
| `0x4652000000000019` | "own consumption normal"<br />For processing, see (`0x4652000000000003`)                                                                                                                                                                                                                                                                             | 1.2                 |
| `0x465200000000001A` | "own consumption special"<br />For processing, see (`0x4652000000000004`)                                                                                                                                                                                                                                                                            | 1.2                 |
| `0x465200000000001B` | "own consumption zero"<br />For processing, see (`0x4652000000000005`)                                                                                                                                                                                                                                                                               | 1.2                 |
| `0x465200000000001C` | "prepayment reduced-1"<br />For processing, see (`0x4652000000000001`)                                                                                                                                                                                                                                                                               | 1.2                 |
| `0x465200000000001D` | "prepayment reduced-2"<br />For processing, see (`0x4652000000000002`)                                                                                                                                                                                                                                                                               | 1.2                 |
| `0x465200000000001E` | "prepayment normal"<br />For processing, see (`0x4652000000000003`)                                                                                                                                                                                                                                                                                  | 1.2                 |
| `0x465200000000001F` | "prepayment special"<br />For processing, see (`0x4652000000000004`)                                                                                                                                                                                                                                                                                 | 1.2                 |
| `0x4652000000000020` | "prepayment zero"<br />For processing, see (`0x4652000000000005`)                                                                                                                                                                                                                                                                                    | 1.2                 |
| `0x4652000000000021` | "account of a third party/ third party name/ collection"<br />For processing, see (`0x4652000000000007`)                                                                                                                                                                                                                                             | 1.2                 |
| `0x4652000000000022` | Obligation ???                                                                                                                                                                                                                                                                                                                                       | 1.2                 |

<span id="_Toc527986687" class="anchor"></span>*Table 35. Type of Service: ftChargeItemCase (FR – BOI-TVA-DECL 30-10-30)*

In the following there are further guidelines for using ftChargeItemCase.

### Type of Payment: ftPayItemCase

The ftPayItemCase defines the type of payment within the pay items block and thus how the fiskaltrust.SecurityMechanism processes the individual payment in terms of the receipt.

| **Value**            | **Description**                                                                                                                   | **Middleware Version** |
|----------------------|-----------------------------------------------------------------------------------------------------------------------------------|---------------------|
| `0x4652000000000000` | "default value"<br />unknown payment type: automatic processing through the fiskaltrust.SecurityMechanisms settings is attempted. | 1.2                 |
| `0x4652000000000000` | "unknown payment type for FR"<br />This is handled like a cash payment in national currency.                                      | 1.2                 |
| `0x4652000000000001` | "cash payment in national currency"<br />cash                                                                                     | 1.2                 |
| `0x4652000000000002` | "cash payment in foreign currency"<br />cash                                                                                      | 1.2                 |
| `0x4652000000000003` | "crossed cheque"<br />cash                                                                                                        | 1.2                 |
| `0x4652000000000004` | "debit card payment"<br />noncash                                                                                                 | 1.2                 |
| `0x4652000000000005` | "credit card payment"<br />cash                                                                                                   | 1.2                 |
| `0x4652000000000006` | "voucher payment (coupon)" voucher by money value<br />cash                                                                       | 1.2                 |
| `0x4652000000000007` | "online payment"<br />noncash                                                                                                     | 1.2                 |
| `0x4652000000000008` | "customer card payment"<br />noncash                                                                                              | 1.2                 |
| `0x4652000000000009` | "other debit card"<br />noncash                                                                                                   | 1.2                 |
| `0x465200000000000A` | "other credit card"<br />cash                                                                                                     | 1.2                 |
| `0x465200000000000B` | "account receivable"<br />delivery note/ settlement in foreign currency<br />internal                                             | 1.2                 |
| `0x465200000000000C` | "SEPA transfer"<br />noncash                                                                                                      | 1.2                 |
| `0x465200000000000D` | "other transfer"<br />noncash                                                                                                     | 1.2                 |
| `0x465200000000000E` | "cash book expense"<br />internal                                                                                                 | 1.2                 |
| `0x465200000000000F` | "cash book contribution"<br />internal                                                                                            | 1.2                 |
| `0x4652000000000010` | "levy" ??<br />internal                                                                                                           | 1.2                 |
| `0x4652000000000011` | "internal/ material consumption"<br />Can be used for bill<br />internal                                                          | 1.2                 |
| `0x4652000000000012` | "change"<br />tip<br />cash                                                                                                       | 1.2                 |

<span id="_Toc527986688" class="anchor"></span>*Table 36. Type of Payment: ftPayItemCase (FR - BOI-TVA-DECL 30-10-30)*

### Type of Signature: ftSignatureType

The ftSignatureType indicates type and origin of the signature.

| **Value**            | **Description**     | **Version** |
|----------------------|---------------------|-------------|
| `0x4652000000000000` | unknown FR          |             |
| `0x4652000000000001` | JWT                 | 1.2         |
| `0x4652000000000002` | Shift Closing Sum   | 1.2         |
| `0x4652000000000003` | Day Closing Sum     | 1.2         |
| `0x4652000000000004` | Month Closing Sum   | 1.2         |
| `0x4652000000000005` | Year Closing Sum    | 1.2         |
| `0x4652000000000006` | Archive Totals Sum  | 1.2         |
| `0x4652000000000007` | Perpetual Total Sum | 1.2         |

<span id="_Toc527986689" class="anchor"></span>*Table 37. Type of Signature: ftSignatureType (FR - BOI-TVA-DECL 30-10-30)*

### Type of Journal: ftJournalType

The ftJournalType is used in connection with the journal function and defines the journal stream in accordance to the French law which is given back. In In the ftJournalType, the ISO-3166-1-ALPHA-2 from ASCII value is converted into hex and used as byte 8 and 7. For France (FR) this is 0x4652<span id="t-type-of-journal-ftjournaltype-160">.</span>

| **Value**            | **Description**                  | **Version** |
|----------------------|----------------------------------|-------------|
| `0x4652000000000000` | Status information for QueueFR   |             |
| `0x4652000000000001` | Ticket ("T" group) export        |             |
| `0x4652000000000002` | Payment Prove ("P" group) export |             |
| `0x4652000000000003` | Invoice ("I" group) export       |             |
| `0x4652000000000004` | Grand Total ("G" group) export   |             |
| `0x4652000000000007` | Bill ("B" group) export          |             |
| `0x4652000000000008` | Archive ("A" group) export       |             |
| `0x4652000000000009` | Log ("L" group) export           |             |
| `0x465200000000000A` | Copy ("C" group) export          |             |
| `0x465200000000000B` | Training ("X" group) export      |             |

*Table 38. Type of Journal: ftJournalType (FR - BOI-TVA-DECL 30-10-30)*

#### ftJournalTypeFlag

Journals can be extracted in combination with this flags, which would be indicated using codes in byte 5. These codes can be combined using the logic operator OR.

| **Value**            | **Description**                  | **Version** |
|----------------------|----------------------------------|-------------|
| `0x0000000000010000` | Receive journal export as csv-file and compare hash-values created with receiptcase `0x4652000000000017` | 1.2         |
