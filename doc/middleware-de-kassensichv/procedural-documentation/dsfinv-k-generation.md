---
slug: /poscreators/middleware-doc/germany/dsfinv-k
title: DSFinV-K generation
---

# Procedural documentation for DSFinV-K generation

## DSFinV-K export

The fiskaltrust.Middleware is able to automatically generate a DSFinV-K export, either via the `journal` endpoint (locally) or in the cloud (when a POS Archive was purchased).
Based on the version 2.3 of the DSFinV-K specification, this chapter explains how the DSFinV-K export is structured, shows how the previously described input values are mapped by fiskaltrust to the files and data of the DSFinV-K export and defines how additional, for the DSFInV-K required, values can be sent to the ft.Middleware. Furthermore, it describes how the marking of actions (DE: Vorgänge) can be made by connecting business actions (DE: Geschäftsvorfälle) and other procedures, occurrences and events (DE: Andere Vorgänge). 

This chapter explains how the DSFinV-K export, based on version 2.3 of the DSFinV-K specification, is structured. It describes how the previously described input values are mapped by fiskaltrust to the files and data of the DSFinV-K export. It defines how additional, for the DSFinV-K required values, can be sent to the fiskaltrust.Middleware. Furthermore, it describes how the marking of actions (DE: Vorgänge) can be made by connecting business actions (DE: Geschäftsvorfälle) and other procedures, occurrences and events (DE: Andere Vorgänge). 

### Prerequisite

A daily-closing-receipt must be sent at the end of the day for the fiskaltrust.Middleware to be able to generate the DSFinV-K export. Without the daily-closing-receipts the DSFinV-K export will be empty.
A detailed description of the daily-closing-receipt can be found in our postman collection:
[Daily-Closing-Receipt](https://middleware-samples.docs.fiskaltrust.cloud/#ebb752b7-5cc8-4026-9e13-f2b3ef0e5c87)

### Structure

The DSFinV-K export is divided into the following sections/modules: 

- Single recordings module (DE: Einzelaufzeichnungsmodul)
- Master data module (DE: Stammdatenmodul)
- Cashpoint closing module (DE: Kassenabschlussmodul)

Each module consists of several files. In the following, we will look at the individual modules, especially the files and data content. Details about the meaning of the files and their individual fields can be found in the official DSFinV-K specification.

### Mandatory data

This chapter lists the data fields that are mandatory and have to be provided by the cashpoint. For details on how to provide them, please see the chapters below. They offer information for all DSFinV-K fields. 

| **Fieldname**      | **Module**        | **Description**                                                                                                                                                      |
|--------------------|-------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `BON_ID`           | Single recordings | Action-ID (DE: Vorgangs-ID)                                                                                                                                          |
| `POS_TERMINAL_ID`  | Single recordings | ID of the slave (terminal) where the position (line) comes from. ***Removed as of new DSFinV-K 2.3 regulations***                                                                                                     |
| `ART_NR`           | Single recordings | Article number.                                                                                                                                                      |
| `INHAUS`           | Single recordings | Inhouse consumption                                                                                                                                                  |
| `GTIN`             | Single recordings | Global Trade Item Number.                                                                                                                                            |
| `WARENGR`          | Single recordings | Product group name.                                                                                                                                                  |
| `MENGE`            | Single recordings | Quantity.                                                                                                                                                            |
| `FAKTOR`           | Single recordings | Factor, e.g. container size.                                                                                                                                         |
| `EINHEIT`          | Single recordings | Unit of measurement, e.g. kg.                                                                                                                                        |
| `STK_BR`           | Single recordings | Price per unit incl. VAT.                                                                                                                                            |
| `BON_NAME`         | Single recordings | The `BON_NAME` is used to subdivide further the items contained in the transaction category (`BON_TYP`). The `BON_NAME` must be filled if `BON_TYP` is `AVSonstige`. |
| `TERMINAL_ID`      | Single recordings | ID of the terminal that was used to record this receipt. ***Removed as of new DSFinV-K 2.3 regulations***                                                                                                             |
| `BEDIENER_NAME`    | Single recordings | User name                                                                                                                                                            |
| `AGENTUR_ID`       | Single recordings | ID of the agency, only mandatory if agency business (DE: Agenturgeschäft)                                                                                            |
| `KUNDE_NAME`       | Single recordings | Full name of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                                |
| `KUNDE_ID`         | Single recordings | ID of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                                       |
| `KUNDE_TYP`        | Single recordings | Type of the beneficiary customer (e.g. employee).  Mandatory if available. See also AEAO to § 146                                                                    |
| `KUNDE_STRASSE`    | Single recordings | Street and house number of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                  |
| `KUNDE_PLZ`        | Single recordings | Zip of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                                      |
| `KUNDE_ORT`        | Single recordings | City of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                                     |
| `KUNDE_LAND`       | Single recordings | Country of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                                  |
| `KUNDE_USTID`      | Single recordings | VAT-ID of the beneficiary customer. Mandatory if available. See also AEAO to § 146                                                                                   |
| `ABRECHNUNGSKREIS` | Single recordings | Connection criterion of the assignment.                                                                                                                              |
| `ZAHLWAEH_CODE`    | Single recordings | Foreign currency code. Only mandatory if foreign currency was used for the payment.                                                                                  |
| `ZAHLWAEH_BETRAG`  | Single recordings | Amount in foreign currency. Only mandatory if foreign currency was used for the payment.                                                                             |

The following chapters give you an overview of all DSFinV-K fields, provide you information on how they are filled by fiskaltrust and how you can send additional data to fill mandatory (listed above) and optional fields that can not be filled by fiskaltrust.

### Single recordings module (DE: Einzelaufzeichnungsmodul)

The single recordings provide the basis for data storage. These are divided into two main areas:

- Bonpos (lines.csv)
- Bonkopf (transactions.csv)

In addition to these two files, there are further detail files which are listed below. 

#### File: Bonpos (lines.csv)

| **Fieldname**     | **Description**                                | **Format**                | **fiskaltrust input**                                                                                                                                                                                                                                                                                                                                                                                                 |
|-------------------|------------------------------------------------|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`      | ID of the (closing) cashpoint                  | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                                                                                                                                                                                                                                                                                                                           |
| `Z_ERSTELLUNG`    | Date of the cashpoint closing                  | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                                                                                                                                                                                                                                                                                                                               |
| `Z_NR`            | Nr. of the cashpoint closing                   | Integer                   | Automatically created and filled by fiskaltrust                                                                                                                                                                                                                                                                                                                                                                       |
| `BON_ID`          | Action-ID                                      | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                                                                                                                                                                                                                                                                                                                           |
| `POS_ZEILE`       | Line/Position number                           | String (50)               | Automatically created and filled by fiskaltrust                                                                                                                                                                                                                                                                                                                                                                       |
| `GUTSCHEIN_NR`    | Voucher no.                                    | String (50)               | Optional, can be sent via `ftPayItemCaseData` or `ftChargeItemCaseData` in JSON format. To send, add the key value pair `VoucherNr` e.g. `"ftPayItemCaseData":"{ ..., "VoucherNr":"UAUA91829182HH", ... }"`                                                                                                                                                                                                           |
| `ARTIKELTEXT`     | Product/Article text                           | String (255)              | Optional, to send, please fill `cbChargeItem.Description`                                                                                                                                                                                                                                                                                                                                                             |
| `POS_TERMINAL_ID` | Terminal-ID of this line (position)            | String (50)               | Can be sent via `ftChargeItemCaseData` in JSON format. To send, add the key value pair `TerminalId` e.g. `"ftChargeItemCaseData":"{ ..., "TerminalId":"09839839", ... }"` `cbTerminalID`. If not sent, then `cbTerminalId` will be used by fiskaltrust to fill the field. ***Removed as of new DSFinV-K 2.3 regulations***                                                                                                                                             |
| `GV_TYP`          | Type of business action                        | String (30)               | Automatically filled by fiskaltrust. Deducted from `ftChargeItemCase`.                                                                                                                                                                                                                                                                                                                                                |
| `GV_NAME`         | Addition to the business action type           | String (40)               | Automatically filled by fiskaltrust. Depending on `ftChargeItemId` or `ftPayItemId`                                                                                                                                                                                                                                                                                                                                   |
| `INHAUS`          | Inhouse consumption                            | 0 or 1                    | Mandatory, can be set via flag of the charge item.                                                                                                                                                                                                                                                                                                                                                                    |
| `P_STORNO`        | Position cancellation identification           | String                    | Not supported                                                                                                                                                                                                                                                                                                                                                                                                         |
| `AGENTUR_ID`      | ID of the Agency                               | Integer                   | Mandatory if agency business (DE: Agenturgeschäft). Please send via `ftChargeItemCaseData` in JSON format. To send, add the key value pair `AgencyId` e.g. `"ftChargeItemCaseData":"{ ..., "AgencyId": "73c94a68-c329-4d82-a8e4-d48903791922", ... }"` (the ID can be taken from the Portal's _Agency management_ page)                                                                                               |
| `ART_NR`          | Article number                                 | String (50)               | Mandatory, to send please fill `ftChargeItem.ProductNumber`                                                                                                                                                                                                                                                                                                                                                           |
| `GTIN`            | Global Trade Item Number                       | String (50)               | Mandatory if an article, to send please fill `ftChargeItem.ProductBarcode`                                                                                                                                                                                                                                                                                                                                            |
| `WARENGR_ID`      | Product group ID                               | String (40)               | Optional. To send, please add the key value pair `ProductGroupId` to the ChargeItem (e.g. `"ftChargeItemCaseData":"{ ..., "ProductGroupId":192, ... }"`) or `MoneyGroupId` to the payitem (e.g. `"ftPayItemCaseData":"{ ..., "MoneyGroupId":192, ... }"`). If not sent, the fiskaltrust.Middleware will automatically generate an ID (CRC32 hash) deducted from `ftChargeItem.ProductGroup` or `ftPayItem.MoneyGroup` |
| `WARENGR`         | Name of the product group                      | String (50)               | Mandatory, please send via `ftChargeItem.ProductGroup`                                                                                                                                                                                                                                                                                                                                                                |
| `MENGE`           | Quantity                                       | Decimal (3)               | Mandatory, please send via `ftChargeItem.Quantity`                                                                                                                                                                                                                                                                                                                                                                    |
| `FAKTOR`          | factor, e.g. container size                    | Decimal (3)               | Mandatory, please send via `ftChargeItem.UnitQuantity`                                                                                                                                                                                                                                                                                                                                                                |
| `EINHEIT`         | Unit of measurement, e.g. kg, litres or pieces | String                    | Mandatory, please send via `ftChargeItem.Unit`                                                                                                                                                                                                                                                                                                                                                                        |
| `STK_BR`          | Price per unit incl. VAT                       | Decimal (5)               | Mandatory, please send via `ftChargeItem.UnitPrice`                                                                                                                                                                                                                                                                                                                                                                   |

#### File: Bonpos_USt (lines_vat.csv)

| **Fieldname**    | **Description**               | **Format**                | **fiskaltrust input**                                                                                            |
|------------------|-------------------------------|---------------------------|------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`     | ID of the (closing) cashpoint | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                      |
| `Z_ERSTELLUNG`   | Date of the cashpoint closing | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                          |
| `Z_NR`           | Nr. of the cashpoint closing  | Integer                   | Automatically created and filled by fiskaltrust                                                                  |
| `BON_ID`         | Action-ID                     | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                      |
| `POS_ZEILE`      | Line/Position number          | String (50)               | Automatically filled by fiskaltrust                                                                              |
| `UST_SCHLUESSEL` | ID of the VAT rate            | Integer                   | Automatically filled by fiskaltrust depending on the `ftChargeItemCase`                                          |
| `POS_BRUTTO`     | Gross sales                   | Decimal (5)               | Automatically filled by fiskaltrust from `ftChargeItemCase.Amount`                                               |
| `POS_NETTO`      | Net sales                     | Decimal (5)               | Automatically calculated and filled by fiskaltrust depending on `ftChargeItemCase` and `ftChargeItemCase.Amount` |
| `POS_UST`        | VAT                           | Decimal (5)               | Automatically calculated and filled by fiskaltrust depending on `ftChargeItemCase`                               |


#### File: Bonpos_Preisfindung (itemamounts.csv)

fiskaltrust does currently not support the file Bonpos_Preisfindung.

According to the DSFinV-K specification, in the data field STK_BR in the Bonpos file, either the reduced amount is displayed immediately (and the origin of the amount in the file Bonpos_Preisfindung) or the reduction in charges is displayed as a separate line item with negative amounts (with correct tax assignment; see file Bonpos_USt). The GV_TYP "Rabatt" is available for the separate line. For the reduction in charges, the current version of the fiskaltrust.Middleware expects a separate negative `ftChargeItem` with the corresponding `ftChargeItemCase` (e.g. `0x4445000000000031`) which maps to the GV_TYP "Rabatt". 


#### File: Bonpos_Zusatzinfo (subitems.csv)

This table allows to detail the composition of sold combinations of goods (DE: Warenzusammenstellungen). They serve exclusively as an explanation.

This does not affect the basis of assessment for VAT. In the case of goods combinations with different tax rates, however, information is stored here, which serves to control the distribution of the VAT assessment basis (for example, Inhouse breakfast menu consisting of a coffee, a drink and buffet meal). In addition, orders deviating from the standard order can be taken into account to record the actual consumption of goods (for example, french fries instead of rice).

You can send those subitems to the fiskaltrust.Middleware via `ftChargeItemCaseData` in JSON format. To send, add the key value pair `SubItems` as an array of subitems: 

```json
"ftChargeItemCaseData" : "{ 
    ...,
    "SubItems" : [
        { ... },
        { ... }, 
        ...
    ],
    ... 
}"
```

Each subitem is described in the table below: 

| **Fieldname**          | **Description**                                | **Format**                | **fiskaltrust input**                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------------------|------------------------------------------------|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`           | ID of the (closing) cashpoint                  | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                                                                                                                                                                                                                                                                                                                                                |
| `Z_ERSTELLUNG`         | Date of the cashpoint closing                  | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                                                                                                                                                                                                                                                                                                                                                    |
| `Z_NR`                 | Nr. of the cashpoint closing                   | Integer                   | Automatically created and filled by fiskaltrust                                                                                                                                                                                                                                                                                                                                                                                            |
| `BON_ID`               | Action-ID                                      | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                                                                                                                                                                                                                                                                                                                                                |
| `POS_ZEILE`            | Line/Position number                           | String (50)               | Automatically filled by fiskaltrust                                                                                                                                                                                                                                                                                                                                                                                                        |
| `ZI_ART_NR`            | Article number                                 | String (50)               | To send, add the key value pair `ProductNumber` within the subitem. e.g. `"SubItems":"[{ "ProductNumber":"10292", ... }, ... ]`                                                                                                                                                                                                                                                                                                            |
| `ZI_GTIN`              | GTIN                                           | String                    | To send, add the key value pair `GTIN` within the subitem. e.g. `"SubItems":"[{ "ProductNumber":"10292", "GTIN":"4231234266622", ... }, ... ]`                                                                                                                                                                                                                                                                                             |
| `ZI_NAME`              | Article name                                   | String (60)               | To send, add the key value pair `Description` within the subitem. e.g. `"SubItems":"[{ "ProductNumber":"10292", "Description":"4231234266622", ... }, ... ]`                                                                                                                                                                                                                                                                               |
| `ZI_WARENGR_ID`        | Product group ID                               | String (40)               | To send, add the key value pair `ProductGroup` within the subitem. It should be sent as a JSON composed of the key value pairs `ProductGroupId` and `ProductGroupName` e.g. `"SubItems":"[{ ..., "ProductGroup":"{ "ProductGroupId":"981981AA", "ProductGroupName":"Fleischwaren" }", ... }, ... ]`. If only `ProductGroupName` is filled, fiskaltrust will automatically fill `ZI_WARENGR_ID` by creating a hash from `ProductGroupName`. |
| `ZI_WARENGR`           | Name of the product group                      | String (50)               | Similar to `ZI_WARENGR_ID`, use `SubItem.ProductGroup.ProductGroupName`                                                                                                                                                                                                                                                                                                                                                                    |
| `ZI_MENGE`             | Quantity                                       | Decimal (3)               | To send, add the key value pair `Quantity` within the subitem. e.g. `"SubItems":"[{..., "Quantity":2.543, ... }, ... ]`                                                                                                                                                                                                                                                                                                                    |
| `ZI_FAKTOR`            | factor, e.g. container sizes                   | Decimal (3)               | To send, add the key value pair `UnitQuantity` within the subitem. e.g. `"SubItems":"[{ ..., "UnitQuantity":1.0, ... }, ... ]`                                                                                                                                                                                                                                                                                                             |
| `ZI_EINHEIT`           | Unit of measurement, e.g. kg, litres or pieces | String (50)               | To send, add the key value pair `Unit` within the subitem. e.g. `"SubItems":"[{ ..., "Unit":"kg", ... }, ... ]`                                                                                                                                                                                                                                                                                                                            |
| `ZI_UST_SCHLUESSEL`    | ID of VAT rate for the base price              | Integer                   | To send, add the key value pair `ftSubChargeItemCase` within the subitem. e.g. `"SubItems":"[{..., "ftSubChargeItemCase":"4919338167972134929", ... }, ... ]`. Possible values for `ftSubChargeItemCase` are the same as for `ftChargeItemCase` - as described in the reference table above. If `ftSubChargeItemCase` is not set, the parent item's `ftChargeItemCase` will be used to compute this value.                                 |
| `ZI_BASISPREIS_BRUTTO` | Gross basis price                              | Decimal (5)               | To send, add the key value pair `Amount` within the subitem. e.g. `"SubItems":"[{..., "Amount":22.50, ... }, ... ]`                                                                                                                                                                                                                                                                                                                        |
| `ZI_BASISPREIS_NETTO`  | Net basis price                                | Decimal (5)               | Automatically calculated by fiskaltrust from  `ftSubChargeItemCase` and (subitem) `Amount`                                                                                                                                                                                                                                                                                                                                                 |
| `ZI_BASISPREIS_UST`    | Basis VAT                                      | Decimal (5)               | Automatically filled by fiskaltrust depending on `ftSubChargeItemCase`                                                                                                                                                                                                                                                                                                                                                                     |


#### File: Bonkopf (transactions.csv)

| **Fieldname**   | **Description**                                                    | **Format**                    | **fiskaltrust input**                                                                                                                                                                                                                           |
|-----------------|--------------------------------------------------------------------|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`    | ID of the (closing) cashpoint                                      | String (50)                   | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                                                                                                                                                     |
| `Z_ERSTELLUNG`  | Date of the cashpoint closing                                      | ISO 8601 und RFC3339 date     | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                                                                                                                                                         |
| `Z_NR`          | Nr. of the cashpoint closing                                       | Integer                       | Automatically created and filled by fiskaltrust                                                                                                                                                                                                 |
| `BON_ID`        | Action-ID                                                          | String (40)                   | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                                                                                                                                                     |
| `BON_NR`        | Receipt number                                                     | Long                          | Automatically filled by fiskaltrust (`ftReceiptNumerator`)                                                                                                                                                                                      |
| `BON_TYP`       | Receipt type / action type                                         | String (30)                   | Deducted from `ftReceiptCase`                                                                                                                                                                                                                   |
| `BON_NAME`      | Additional description related to the `BON_TYP`                    | String (60)                   | Mandatory if `BON_TYPE` is "AVSonstige", otherwise optional, can be sent via `ftReceiptCaseData` in JSON format. To send, add the key value pair `ReceiptName ` e.g. `"ftReceiptCaseData":"{ ..., "ReceiptName":"Sonstige Sonderwurst", ... }"` |
| `TERMINAL_ID`   | Mandatory, ID of the terminal that was used to record this receipt | String (50)                   | `cbTerminalID` ***Removed as of new DSFinV-K 2.3 regulations***                                                                                                                                                                                                                                 |
| `BON_STORNO`    | Cancellation indicator                                             | 0 or 1                        | Automatically filled  by fiskaltrust                                                                                                                                                                                                            |
| `BON_START`     | Time of the action start                                           | ISO 8601 and RFC3339 date     | Automatically filled by fiskaltrust                                                                                                                                                                                                             |
| `BON_ENDE`      | Time of the action end                                             | ISO 8601 and RFC3339 date     | Automatically filled by fiskaltrust.                                                                                                                                                                                                            |
| `BEDIENER_ID`   | User-ID                                                            | String (50)                   | Optional. To send, please add the key value pair `UserId` e.g. `"ftReceiptCaseData":"{ ..., "UserId": "U192", ... }"`. If not sent, the fiskaltrust will automatically generate a User-ID (hash) deducted from `cbUser`                         |
| `BEDIENER_NAME` | User name                                                          | String (50)                   | Mandatory, please send via `cbUser`                                                                                                                                                                                                             |
| `UMS_BRUTTO`    | Gross total turnover                                               | Decimal (2)                   | Automatically filled by fiskaltrust                                                                                                                                                                                                             |
| `KUNDE_NAME`    | Name of beneficiary customer                                       | String (50)                   | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerName` e.g. `"cbCustomer":"{"CustomerName":"Max Wanne",...}"`                                                         |
| `KUNDE_ID`      | ID of the beneficiary customer                                     | String (50)                   | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerId` e.g. `"cbCustomer":"{"customerName":"Max Mustermann", "CustomerId":"PX9819822", ...}"`                           |
| `KUNDE_TYP`     | Type of the beneficiary customer (e.g. employee)                   | String (50)                   | Mandatory if available. See also AEAO to § 146.  Send via `cbCustomer` in JSON format by adding the key value pair `CustomerType` e.g. `"cbCustomer":"{..., "CustomerId":"PX9819822", "CustomerType":"Mitarbeiter", ...}"`                      |
| `KUNDE_STRASSE` | Street and house number of the beneficiary customer                | String (60)                   | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerStreet` e.g. `"cbCustomer":"{..., "CustomerStreet":"Lindwurmstr. 98", ...}"`                                         |
| `KUNDE_PLZ`     | Zip of the beneficiary customer                                    | String (10)                   | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerZip` e.g. `"cbCustomer":"{..., "CustomerZip":"80337", ...}"`                                                         |
| `KUNDE_ORT`     | City of the beneficiary customer                                   | String (62)                   | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerCity` e.g. `"cbCustomer":"{..., "CustomerCity":"München", ...}"`                                                     |
| `KUNDE_LAND`    | Country of the beneficiary customer                                | ISO 3166 ALPHA-3 country code | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerCountry` e.g. `"cbCustomer":"{..., "CustomerCountry":"DEU", ...}"`                                                   |
| `KUNDE_USTID`   | VAT-ID of the beneficiary customer                                 | String (15)                   | Mandatory if available. See also AEAO to § 146. Send via `cbCustomer` in JSON format by adding the key value pair `CustomerVATId` e.g. `"cbCustomer":"{..., "CustomerVATId":"DE123456789", ...}"`                                               |
| `BON_NOTIZ`     | Additional information on the receipt header                       | String (255)                  | Optional, can be sent via `ftReceiptCaseData` in JSON format. To send, add the key value pair `ReceiptNote ` e.g. `"ftReceiptCaseData":"{ ..., "ReceiptNote":"123, ich bin dabei!", ... }"`                                                     |

#### File: Bonkopf_USt  (transactions_vat.csv)

| **Fieldname**    | **Description**               | **Format**                | **fiskaltrust input**                                                                   |
|------------------|-------------------------------|---------------------------|-----------------------------------------------------------------------------------------|
| `Z_KASSE_ID`     | ID of the (closing) cashpoint | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)             |
| `Z_ERSTELLUNG`   | Date of the cashpoint closing | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt |
| `Z_NR`           | Nr. of the cashpoint closing  | Integer                   | Automatically created and filled by fiskaltrust                                         |
| `BON_ID`         | Action-ID                     | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)             |
| `POS_ZEILE`      | Line/Position number          | String (50)               | Automatically filled by fiskaltrust                                                     |
| `UST_SCHLUESSEL` | ID of the VAT rate            | Integer                   | Automatically filled by fiskaltrust                                                     |
| `BON_BRUTTO`     | Gross sales                   | Decimal (5)               | Automatically filled by fiskaltrust                                                     |
| `BON_NETTO`      | Net sales                     | Decimal (5)               | Automatically filled by fiskaltrust                                                     |
| `BON_UST`        | VAT                           | Decimal (5)               | Automatically filled by fiskaltrust                                                     |

#### File: Bonkopf_AbrKreis (allocation_groups.csv)

| **Fieldname**      | **Description**                        | **Format**                | **fiskaltrust input**                                                                                                   |
|--------------------|----------------------------------------|---------------------------|-------------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`       | ID of the (closing) cashpoint          | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                             |
| `Z_ERSTELLUNG`     | Date of the cashpoint closing          | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                                 |
| `Z_NR`             | Nr. of the cashpoint closing           | Integer                   | Automatically created and filled by fiskaltrust                                                                         |
| `BON_ID`           | Action-ID                              | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                             |
| `ABRECHNUNGSKREIS` | Connection criterion of the assignment | String (50)               | Mandatory, filled by fiskaltrust. by using `cbReceiptReference` and `cPreviousReceiptReference` to determine the value. |

#### File: Bonkopf_Zahlarten (datapayment.csv)

| **Fieldname**      | **Description**                        | **Format**                | **fiskaltrust input**                                                                                                                                                                                                                                                      |
|--------------------|----------------------------------------|---------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`       | ID of the (closing) cashpoint          | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                                                                                                                                                                                |
| `Z_ERSTELLUNG`     | Date of the cashpoint closing          | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                                                                                                                                                                                    |
| `Z_NR`             | Nr. of the cashpoint closing           | Integer                   | Automatically created and filled by fiskaltrust                                                                                                                                                                                                                            |
| `BON_ID`           | Action-ID                              | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                                                                                                                                                                                |
| `ZAHLART_TYP`      | Type of payment method                 | String (25)               | Automatically filled by fiskaltrust. Deducted from `ftPayItemCase`                                                                                                                                                                                                         |
| `ZAHLART_NAME`     | Name of the payment method             | String (60)               | Optional, can be sent via `ftPayItemCaseData` in JSON format. To send, add the key value pair `ItemCaseName` e.g. `"ftPayItemCaseData":"{ ..., "ItemCaseName":"Sodexo", ... }"`                                                                                            |
| `ZAHLWAEH_CODE`    | ISO 4217 currency code                 | String (3)                | Only mandatory if foreign currency was used for the payment, can be sent via `ftPayItemCaseData` in JSON format. To send, add the key value pair `CurrencyCode` e.g. `"ftPayItemCaseData":"{ ..., "CurrencyCode":"USD", ... }"`. Only ISO 4217 currency codes are allowed. |
| `ZAHLWAEH_BETRAG`  | Amount in foreign currency             | Decimal (2)               | Only mandatory if foreign currency was used for the payment, can be sent via `ftPayItemCaseData` in JSON format. To send, add the key value pair `ForeignCurrencyAmount` e.g. `"ftPayItemCaseData":"{ ..., "ForeignCurrencyAmount":23.00, ... }"`.                         |
| `BASISWAEH_BETRAG` | Amount in basis currency (usually EUR) | Decimal (2)               | Only mandatory if foreign currency was used for the payment, can be sent via `ftPayItemData` in JSON format. To send, add the key value pair `BaseCurrencyAmount` e.g. `"ftPayItemCaseData":"{ ..., "BaseCurrencyAmount":20.99, ... }"`                                    |

#### File: Bon_Referenzen (references.csv)

If `cbPreviousReceiptReference` is filled in your receipt request, fiskaltrust will automatically try to find the referenced receipt, and if found, fiskaltrust will add an entry to Bon_Referenzen. 

If a previous receipt with the same `cbReceiptReference` exists, fiskaltrust will also automatically find the referenced receipt and add an entry to Bon_Referenzen. 

For a recommendation on how to connect the single requests via `cbReceiptReference` and `cbPreviousReceiptReference`, please refer to our [Postman sample collection](https://middleware-samples.docs.fiskaltrust.cloud/).

If you optionally want to add additional references (from other systems or other cashpoints), you can add them by providing their data as shown below:

| **Fieldname**    | **Description**                          | **Format**                                                                        | **fiskaltrust input**                                                                                                                                                                                                                                                                                                                                                       |
|------------------|------------------------------------------|-----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Z_KASSE_ID`     | ID of the (closing) cashpoint            | String (50)                                                                       | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)                                                                                                                                                                                                                                                                                                 |
| `Z_ERSTELLUNG`   | Date of the cashpoint closing            | ISO 8601 und RFC3339 date                                                         | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt                                                                                                                                                                                                                                                                                     |
| `Z_NR`           | Nr. of the cashpoint closing             | Integer                                                                           | Automatically created and filled by fiskaltrust                                                                                                                                                                                                                                                                                                                             |
| `BON_ID`         | Action-ID                                | String (40)                                                                       | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)                                                                                                                                                                                                                                                                                                 |
| `POS_ZEILE`      | Line number of the referencing operation | String (50)                                                                       | Automatically filled by fiskaltrust                                                                                                                                                                                                                                                                                                                                         |
| `REF_TYP`        | Type of reference                        | "ExterneRechnung" or "ExternerLieferschein" or "Transaktion" or "ExterneSonstige" | Can be sent via `ftReceiptCaseData` in JSON format. To send, add the key value pair `RefType ` e.g. `"ftReceiptCaseData":"{ ..., "RefType":"Transaktion", ... }"`. The value "Transaktion" maps to an internal reference within this DSFinV-K export, all other values map to external references.                                                                          |
| `REF_NAME`       | Description for type                     | String (40)                                                                       | If the external reference you want to add is of type (`RefType`) "ExterneSonstige", you must provide data for the field `REF_NAME`. Please send it via `ftReceiptCaseData` in JSON format.by adding the key value pair `RefName ` e.g. `"ftReceiptCaseData":"{ ..., "RefName":"Sonstige Sonderwurst", ... }"`.                                                              |
| `REF_DATUM`      | Date of the cashpoint closing            | String (30)                                                                       | If the reference you want to add refers to another cashpoint and therefore is of type (`RefType`) "Transaktion", you must provide data for the field `REF_DATUM`. Please send it via `ftReceiptCaseData` in JSON format by adding the key value pair `RefMoment` e.g. `"ftReceiptCaseData":"{ ..., "RefMoment":"2020-01-03T17:00:01", ... }"`.                              |
| `REF_Z_KASSE_ID` | ID of the (closing) cashpoint            | String (50)                                                                       | If the reference you want to add refers to another cashpoint and therefore is of type (`RefType`) "Transaktion", you must provide data for the field `REF_Z_KASSE_ID`. Please send it via `ftReceiptCaseData` in JSON format by adding the key value pair `RefCashBoxIdentification ` e.g. `"ftReceiptCaseData":"{ ..., "RefCashBoxIdentification":"AHHAH1919919", ... }"`. |
| `REF_Z_NR`       | No. of the cashpoint closing             | Integer                                                                           | If the reference you want to add refers to another cashpoint and therefore is of type (`RefType`) "Transaktion", you must provide data for the field `REF_Z_NR`. Please send it via `ftReceiptCaseData` in JSON format by adding the key value pair `RefClosingNr` e.g. `"ftReceiptCaseData":"{ ..., "RefClosingNr":1091029, ... }"`.                                       |
| `REF_BON_ID`     | Action-ID                                | String (40)                                                                       | If the reference you want to add refers to another cashpoint and therefore is of type (`RefType`) "Transaktion", you must provide data for the field `REF_BON_ID`. Please send it via `ftReceiptCaseData` in JSON format by adding the key value pair `RefReceiptId` e.g. `"ftReceiptCaseData":"{ ..., "RefReceiptId":"UAUUA1112#20200211-112430", ... }"`.                 |

#### File: TSE_Transaktionen (transactions_tse.csv)

| **Fieldname**        | **Description**                                      | **Format**                | **fiskaltrust input**                                                                   |
|----------------------|------------------------------------------------------|---------------------------|-----------------------------------------------------------------------------------------|
| `Z_KASSE_ID`         | ID of the (closing) cashpoint                        | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)             |
| `Z_ERSTELLUNG`       | Date of the cashpoint closing                        | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt |
| `Z_NR`               | Nr. of the cashpoint closing                         | Integer                   | Automatically created and filled by fiskaltrust                                         |
| `BON_ID`             | Action-ID                                            | String (40)               | Automatically created and filled by fiskaltrust (`ftReceiptIdentification`)             |
| `TSE_ID`             | ID of the TSE used for the transaction               | Integer                   | Automatically filled by fiskaltrust                                                     |
| `TSE_TANR`           | Transaction number of the transaction                | Integer                   | Automatically filled by fiskaltrust                                                     |
| `TSE_TA_START`       | Log time of the StartTransaction operation           | String (30)               | Automatically filled by fiskaltrust                                                     |
| `TSE_TA_ENDE`        | Log time of the FinishTransaction operation          | String (30)               | Automatically filled by fiskaltrust                                                     |
| `TSE_TA_VORGANGSART` | processType der FinishTransaktions operation         | String (30)               | Automatically filled by fiskaltrust                                                     |
| `TSE_TA_SIGZ`        | Signature counter of the FinishTransaction operation | Long                      | Automatically filled by fiskaltrust                                                     |
| `TSE_TA_SIG`         | Signature of the FinishTransaction operation         | String (512)              | Automatically filled by fiskaltrust                                                     |
| `TSE_TA_FEHLER`      | Where appropriate, indications of TSE errors         | String (200)              | Automatically filled by fiskaltrust                                                     |
| `TSE_VORGANGSDATEN`  | Data of the operation (optional)                     | String                    | Automatically filled by fiskaltrust                                                     |

### Cashpoint closing module (DE: Kassenabschlussmodul)

The three structure levels (modules) allow transactions to be separated and grouped to be automatically posted or transferred to the bookkeeping. Therefore, the cash register closing has an accounting function, meaning that the data of the respective closing has to be exported digitally within this module.  

The mandatory, audit-proof storage can be fulfilled with the fiskaltrust [add-on-products](https://fiskaltrust.de/produkte) (e.g. POS Archiv or AKO - Audicon Kassenarchiv Online).<!-- markdown-link-check-disable-line -->

The export takes place into the following three files:

#### File: Z_Zahlart Z_GV_TYP (businesscases.csv)

| **Fieldname**    | **Description**                  | **Format**                | **fiskaltrust input**                                                                   |
|------------------|----------------------------------|---------------------------|-----------------------------------------------------------------------------------------|
| `Z_KASSE_ID`     | ID of the (closing) cashpoint    | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)             |
| `Z_ERSTELLUNG`   | Date of the cashpoint closing    | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt |
| `Z_NR`           | Nr. of the cashpoint closing     | Integer                   | Automatically created and filled by fiskaltrust                                         |
| `GV_TYP`         | business action type             | String (30)               | Automatically filled by fiskaltrust                                                     |
| `GV_NAME`        | name of the business action type | String (40)               | Automatically filled by fiskaltrust                                                     |
| `AGENTUR_ID`     | Agency ID                        | Integer                   | Automatically filled by fiskaltrust                                                     |
| `UST_SCHLUESSEL` | ID of the VAT rate               | Integer                   | Automatically filled by fiskaltrust                                                     |
| `Z_UMS_BRUTTO`   | Gross sales                      | Decimal (5)               | Automatically filled by fiskaltrust                                                     |
| `Z_UMS_NETTO`    | Net sales                        | Decimal (5)               | Automatically filled by fiskaltrust                                                     |
| `Z_UST`          | VAT                              | Decimal (5)               | Automatically filled by fiskaltrust                                                     |

#### File: Z_Zahlart (payment.csv)

| **Fieldname**      | **Description**               | **Format**                | **fiskaltrust input**                                                                   |
|--------------------|-------------------------------|---------------------------|-----------------------------------------------------------------------------------------|
| `Z_KASSE_ID`       | ID of the (closing) cashpoint | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)             |
| `Z_ERSTELLUNG`     | Date of the cashpoint closing | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt |
| `Z_NR`             | Nr. of the cashpoint closing  | Integer                   | Automatically created and filled by fiskaltrust                                         |
| `ZAHLART_TYP`      | Type of payment method        | String (25)               | Automatically filled by fiskaltrust                                                     |
| `ZAHLART_NAME`     | Name of the payment method    | String (60)               | Automatically filled by fiskaltrust                                                     |
| `Z_ZAHLART_BETRAG` | business action type          | Decimal (2)               | Automatically filled by fiskaltrust                                                     |

#### File: Z_Waehrungen (cash_per_currency.csv)

| **Fieldname**         | **Description**               | **Format**                | **fiskaltrust input**                                                                   |
|-----------------------|-------------------------------|---------------------------|-----------------------------------------------------------------------------------------|
| `Z_KASSE_ID`          | ID of the (closing) cashpoint | String (50)               | Automatically created and filled by fiskaltrust (`ftCashBoxIdentification`)             |
| `Z_ERSTELLUNG`        | Date of the cashpoint closing | ISO 8601 und RFC3339 date | Automatically filled by fiskaltrust from `cbReceiptMoment` of the daily closing receipt |
| `Z_NR`                | Nr. of the cashpoint closing  | Integer                   | Automatically created and filled by fiskaltrust                                         |
| `ZAHLART_WAEH`        | Currency                      | ISO 4217 currency code    | Automatically filled by fiskaltrust                                                     |
| `ZAHLART_BETRAG_WAEH` | Amount                        | Decimal (2)               | Automatically filled by fiskaltrust                                                     |
